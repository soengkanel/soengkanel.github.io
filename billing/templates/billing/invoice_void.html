{% extends 'base/base.html' %}
{% load static %}

{% block title %}Void Invoice #{{ invoice.invoice_number }}{% endblock %}

{% block extra_css %}
<style>
.void-container {
    max-width: 600px;
    margin: 2rem auto;
    padding: 2rem;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.void-header {
    text-align: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid #fee2e2;
}

.void-icon {
    font-size: 3rem;
    color: #dc2626;
    margin-bottom: 1rem;
}

.void-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: #dc2626;
    margin: 0 0 0.5rem 0;
}

.void-subtitle {
    color: #6b7280;
    margin: 0;
}

.invoice-info {
    background: #f9fafb;
    padding: 1rem;
    border-radius: 6px;
    margin-bottom: 1.5rem;
    border-left: 4px solid #3b82f6;
}

.info-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
}

.info-row:last-child {
    margin-bottom: 0;
}

.info-label {
    font-weight: 500;
    color: #374151;
}

.info-value {
    color: #1f2937;
}

.warning-box {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: 6px;
    padding: 1rem;
    margin-bottom: 1.5rem;
}

.warning-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    color: #92400e;
    margin-bottom: 0.5rem;
}

.warning-text {
    color: #92400e;
    font-size: 0.875rem;
    line-height: 1.5;
    margin: 0;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-label {
    display: block;
    font-weight: 500;
    color: #374151;
    margin-bottom: 0.5rem;
}

.form-textarea {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 0.875rem;
    resize: vertical;
    min-height: 100px;
}

.form-textarea:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.button-group {
    display: flex;
    gap: 1rem;
    justify-content: center;
}

.btn-modern {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border-radius: 6px;
    font-size: 0.875rem;
    font-weight: 500;
    text-decoration: none;
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-danger {
    background: #dc2626;
    color: white;
}

.btn-danger:hover {
    background: #b91c1c;
    color: white;
    transform: translateY(-1px);
}

.btn-secondary {
    background: #f3f4f6;
    color: #374151;
    border: 1px solid #d1d5db;
}

.btn-secondary:hover {
    background: #e5e7eb;
    color: #374151;
}

@media (max-width: 768px) {
    .void-container {
        margin: 1rem;
        padding: 1rem;
    }
    
    .button-group {
        flex-direction: column;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="void-container">
    <div class="void-header">
        <div class="void-icon">
            <i class="bi bi-x-circle"></i>
        </div>
        <h1 class="void-title">Void Invoice</h1>
        <p class="void-subtitle">This action will mark the invoice as cancelled</p>
    </div>

    <div class="invoice-info">
        <div class="info-row">
            <span class="info-label">Invoice Number:</span>
            <span class="info-value">{{ invoice.invoice_number }}</span>
        </div>
        <div class="info-row">
            <span class="info-label">Client:</span>
            <span class="info-value">{{ invoice.get_client_name }}</span>
        </div>
        <div class="info-row">
            <span class="info-label">Amount:</span>
            <span class="info-value">${{ invoice.total_amount|floatformat:2 }}</span>
        </div>
        <div class="info-row">
            <span class="info-label">Status:</span>
            <span class="info-value">{{ invoice.get_status_display }}</span>
        </div>
        <div class="info-row">
            <span class="info-label">Issue Date:</span>
            <span class="info-value">{{ invoice.issue_date|date:"d/m/Y" }}</span>
        </div>
    </div>

    <div class="warning-box">
        <div class="warning-title">
            <i class="bi bi-exclamation-triangle-fill"></i>
            Important Notice
        </div>
        <p class="warning-text">
            Voiding this invoice will mark it as cancelled and cannot be undone. The invoice will remain in the system for audit purposes but will be marked as void. This is different from deleting the invoice.
        </p>
    </div>

    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            <label for="void_reason" class="form-label">Reason for Voiding (Optional)</label>
            <textarea 
                id="void_reason" 
                name="void_reason" 
                class="form-textarea" 
                placeholder="Enter the reason for voiding this invoice..."
                rows="4"></textarea>
        </div>

        <div class="button-group">
            <a href="{% url 'billing:invoice_detail' invoice.id %}" class="btn-modern btn-secondary">
                <i class="bi bi-arrow-left"></i>
                Cancel
            </a>
            <button type="submit" class="btn-modern btn-danger">
                <i class="bi bi-x-circle"></i>
                Void Invoice
            </button>
        </div>
    </form>
</div>
{% endblock %}