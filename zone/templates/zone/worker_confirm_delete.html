{% extends 'base/base.html' %}
{% load static %}

{% block title %}Delete Worker - {{ worker.get_full_name }}{% endblock %}

{% block main_class %}col-md-10 ms-sm-auto col-lg-10{% endblock %}

{% block extra_css %}
<style>
/* Compact Design System - Delete Confirmation */
.page-header {
    padding: 8px 0;
    margin-bottom: 16px;
}
.page-header h2 {
    font-size: 18px;
    font-weight: 600;
    margin: 0;
    color: #1a1a1a;
}
.page-header p {
    font-size: 11px;
    color: #666;
    margin: 0;
}

.delete-card {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 24px;
    max-width: 600px;
    margin: 0 auto;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.warning-icon {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    background: #fef2f2;
    color: #dc2626;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    margin: 0 auto 16px;
}

.delete-title {
    font-size: 18px;
    font-weight: 600;
    color: #1a1a1a;
    text-align: center;
    margin-bottom: 8px;
}

.delete-message {
    font-size: 14px;
    color: #6b7280;
    text-align: center;
    margin-bottom: 24px;
}

.worker-info {
    background: #f8fafb;
    border: 1px solid #e2e8f0;
    border-radius: 6px;
    padding: 16px;
    margin-bottom: 24px;
}

.worker-info h6 {
    font-size: 14px;
    font-weight: 600;
    color: #1a1a1a;
    margin-bottom: 12px;
}

.info-item {
    display: flex;
    justify-content: space-between;
    padding: 6px 0;
    border-bottom: 1px solid #e2e8f0;
}

.info-item:last-child {
    border-bottom: none;
}

.info-label {
    font-size: 12px;
    font-weight: 500;
    color: #6b7280;
}

.info-value {
    font-size: 12px;
    color: #1a1a1a;
    font-weight: 500;
}

.btn-modern {
    font-size: 12px;
    font-weight: 500;
    border-radius: 4px;
    padding: 8px 16px;
    border: none;
    cursor: pointer;
    transition: all 0.15s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.btn-danger-modern {
    background: #dc2626;
    color: white;
}
.btn-danger-modern:hover {
    background: #b91c1c;
    color: white;
    transform: translateY(-1px);
}

.btn-secondary-modern {
    background: #6b7280;
    color: white;
}
.btn-secondary-modern:hover {
    background: #4b5563;
    color: white;
    transform: translateY(-1px);
}

.action-buttons {
    display: flex;
    gap: 12px;
    justify-content: center;
}
</style>
{% endblock %}

{% block content %}
<div class="container-fluid px-3">
    <!-- Page Header -->
    <div class="page-header">
        <h2>Delete Worker</h2>
        <p>Confirm deletion of worker profile</p>
    </div>

    <div class="delete-card">
        <div class="warning-icon">
            <i class="bi bi-exclamation-triangle"></i>
        </div>
        
        <h3 class="delete-title">Delete Worker</h3>
        <p class="delete-message">
            Are you sure you want to delete this worker? This action cannot be undone and will also delete all related records via cascade.
        </p>
        
        {% if error_message %}
        <div class="alert alert-danger mb-3">
            <h6 class="alert-heading"><i class="bi bi-exclamation-circle me-1"></i> Deletion Error</h6>
            <p class="mb-0 small">{{ error_message }}</p>
        </div>
        {% endif %}
        
        {% if change_history_count or documents_count or assignments_count %}
        <div class="alert alert-info mb-3">
            <h6 class="alert-heading"><i class="bi bi-info-circle me-1"></i> Related Records</h6>
            <p class="mb-2 small">The following related records will be automatically deleted via cascade:</p>
            <ul class="mb-0 small">
                {% if change_history_count %}
                <li>{{ change_history_count }} change history record{{ change_history_count|pluralize }}</li>
                {% endif %}
                {% if documents_count %}
                <li>{{ documents_count }} document{{ documents_count|pluralize }}</li>
                {% endif %}
                {% if assignments_count %}
                <li>{{ assignments_count }} assignment{{ assignments_count|pluralize }}</li>
                {% endif %}
            </ul>
        </div>
        {% endif %}

        <div class="worker-info">
            <h6>Worker Information</h6>
            
            <div class="info-item">
                <span class="info-label">Full Name</span>
                <span class="info-value">{{ worker.get_full_name }}</span>
            </div>
            
            <div class="info-item">
                <span class="info-label">Worker ID</span>
                <span class="info-value">{{ worker.worker_id|default:"Not set" }}</span>
            </div>
            
            {% if worker.email %}
            <div class="info-item">
                <span class="info-label">Email</span>
                <span class="info-value">{{ worker.email }}</span>
            </div>
            {% endif %}
            
            {% if worker.phone_number %}
            <div class="info-item">
                <span class="info-label">Phone</span>
                <span class="info-value">{{ worker.phone_number }}</span>
            </div>
            {% endif %}
            
            <div class="info-item">
                <span class="info-label">Zone</span>
                <span class="info-value">{{ worker.zone.name }}</span>
            </div>
            
            {% if worker.building %}
            <div class="info-item">
                <span class="info-label">Building</span>
                <span class="info-value">{{ worker.building.name }}</span>
            </div>
            {% endif %}
            
            <div class="info-item">
                <span class="info-label">Status</span>
                <span class="info-value">{{ worker.get_status_display }}</span>
            </div>
            
            <div class="info-item">
                <span class="info-label">Date Joined</span>
                <span class="info-value">{{ worker.date_joined|date:"d/m/Y" }}</span>
            </div>
        </div>

        <div class="action-buttons">
            <a href="{% url 'zone:worker_detail' worker.id %}" class="btn-modern btn-secondary-modern">
                <i class="bi bi-arrow-left"></i>Cancel
            </a>
            
            <form method="post" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="btn-modern btn-danger-modern">
                    <i class="bi bi-trash"></i>Delete Worker
                </button>
            </form>
        </div>
    </div>
</div>
{% endblock %} 