<style>
    /* INPUT (hidden checkbox) */
  input[type="checkbox"].peer {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
  
  /* SWITCH BACKGROUND */
  .switch-bg {
    width: 2.75rem;        /* w-11 */
    height: 1.5rem;         /* h-6 */
    background-color: #d1d5db; /* bg-gray-300 */
    border-radius: 9999px;  /* rounded-full */
    transition: all 0.3s ease-in-out;
  }
  
  input[type="checkbox"]:focus + .switch-bg {
    outline: none;                   /* peer-focus:outline-none */
    box-shadow: 0 0 0 2px #00a6f4 !important;   /* peer-focus:ring-2 peer-focus:ring-blue-500 */
  }
  
  input[type="checkbox"]:checked + .switch-bg {
    background-color: #00bcff !important; /* peer-checked:bg-blue-600 */
  }
  
  /* SWITCH KNOB */
  .switch-knob {
    position: absolute;
    top: 0.125rem;     /* top-0.5 */
    left: 0.125rem;    /* left-0.5 */
    width: 1.25rem;    /* w-5 */
    height: 1.25rem;   /* h-5 */
    background-color: #ffffff;
    border-radius: 9999px;  /* rounded-full */
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
    transition: transform 0.3s ease-in-out;
  }
  
  input[type="checkbox"]:checked + .switch-bg + .switch-knob {
    transform: translateX(100%);
  }
  
  /* VIP FORM STYLING */
  .vip-form-background {
    background: linear-gradient(135deg, #fef7e6 0%, #fcd34d 25%, #f59e0b 75%, #d97706 100%);
    margin-top:10px;
    padding-top:1px;
    padding-left:10px;
    padding-right:10px;
    padding-bottom:10px;
    border: 2px solid #f59e0b;
    border-radius:8px;
    box-shadow: 
      0 8px 32px rgba(217, 119, 6, 0.25),
      0 4px 16px rgba(245, 158, 11, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
    position: relative;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .vip-form-background::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, #fbbf24, #f59e0b, #d97706, #92400e);
    border-radius:8px;
    z-index: -1;
    animation: vip-glow 3s ease-in-out infinite alternate;
  }
  
  @keyframes vip-glow {
    0% {
      box-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
    }
    100% {
      box-shadow: 0 0 30px rgba(217, 119, 6, 0.8), 0 0 40px rgba(245, 158, 11, 0.4);
    }
  }
  
  .vip-form-background .form-control,
  .vip-form-background .form-select,
  .vip-form-background input,
  .vip-form-background textarea,
  .vip-form-background select {
    background-color: rgba(255, 255, 255, 0.95);
    border-color: #d97706;
    box-shadow: 0 2px 8px rgba(217, 119, 6, 0.1);
  }
  
  .vip-form-background .form-control:focus,
  .vip-form-background .form-select:focus,
  .vip-form-background input:focus,
  .vip-form-background textarea:focus,
  .vip-form-background select:focus {
    border-color: #f59e0b;
    box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2), 0 2px 8px rgba(217, 119, 6, 0.15);
  }
  
  .vip-form-background label {
    color: #92400e;
    font-weight: 600;
    text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
  }
  
  .vip-form-background .card,
  .vip-form-background .border {
    background-color: rgba(255, 255, 255, 0.85);
    border-color: rgba(217, 119, 6, 0.3);
    backdrop-filter: blur(10px);
  }
  
  .vip-form-background h1,
  .vip-form-background h2,
  .vip-form-background h3,
  .vip-form-background h4,
  .vip-form-background h5,
  .vip-form-background h6 {
    color: #92400e;
    text-shadow: 0 2px 4px rgba(255, 255, 255, 0.8);
  }
  </style>
  
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    const vipCheckbox = document.getElementById('{{ form.is_vip.id_for_label }}');
    const formContainer = document.querySelector('.worker-form-container, .main-form-container, form');
    var status = document.getElementById("id_status")
    function toggleVipBackground() {
      if (vipCheckbox && formContainer) {
        if (vipCheckbox.checked) {
          formContainer.classList.add('vip-form-background');
          status.value="passed"
        } else {
          formContainer.classList.remove('vip-form-background');
           status.value="active"
        }
      }
    }
    
    // Check initial state
    if (vipCheckbox) {
      toggleVipBackground();
      vipCheckbox.addEventListener('change', toggleVipBackground);
    }
  });
  </script>
  
  {% comment %}
VIP toggle section - hidden in edit mode per user request
{% endcomment %}
{% if not is_edit or is_edit != 'edit' %}
<div class="rounded-lg border border-gray-200 mt-4">
    
    <div class="p-1">
      <div class="grid grid-cols-1 gap-3">
        {% comment %}
        Status field hidden per user request
        {% if is_edit and is_edit == 'edit' %}
        <div class="flex flex-col gap-1">
            <div>{{ form.status }}</div>
            {% if form.is_vip.errors %}
            <div class="text-danger">
            {% for error in form.is_vip.errors %}{{ error }}{% endfor %}
            </div>
            {% endif %}
        </div>
        {% endif %}
        {% endcomment %}

        <div class="flex flex-col gap-1">
          <div class="px-2 py-1 rounded flex justify-center">
            <label for="{{ form.is_vip.id_for_label }}" class="mt-1 relative inline-flex items-center cursor-pointer">
              {{ form.is_vip }}
              <div class="switch-bg"></div>
              <div class="switch-knob"></div>
              <span class="ml-3 text-sm font-medium text-gray-900"><i class="fa fa-star text-yellow-500 me-1"></i> VIP</span>
            </label>
          </div>
          
          {% if form.is_vip.errors %}
          <div class="text-danger">
            {% for error in form.is_vip.errors %}{{ error }}{% endfor %}
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% else %}
{% comment %}
In edit mode, VIP toggle is hidden but we still need the field for form processing
{% endcomment %}
<div style="display: none;">
  {{ form.is_vip }}
</div>
{% endif %}
  