{% load static %}
<div class="workflow-card {% if probation.days_remaining <= 7 %}urgent{% elif probation.days_remaining <= 30 %}warning{% else %}normal{% endif %}">
    <div class="card-content">
        <div class="card-header-row">
            <h6 class="card-worker-name">
                <a href="{% url 'zone:worker_detail' probation.worker.id %}">
                    {{ probation.worker.get_full_name }}
                </a>
            </h6>
            <span class="card-status status-badge status-{{ probation.worker.status }}">
                {{ probation.worker.get_status_display }}
            </span>
        </div>
        
        <div style="font-size: 0.55rem; color: var(--gray-500); margin-bottom: 0.25rem;">
            {{ probation.worker.worker_id }} â€¢ {{ probation.worker.position.name|default:"No Position" }}
        </div>
        
        <div class="card-dates">
            <div class="date-item">
                <span class="date-item-label">Start</span>
                <span class="date-item-value">{{ probation.start_date|date:"d M" }}</span>
            </div>
            <div class="date-item">
                <span class="date-item-label">End</span>
                <span class="date-item-value">
                    {% if probation.actual_end_date %}
                        {{ probation.actual_end_date|date:"d M" }}
                    {% else %}
                        {{ probation.original_end_date|date:"d M" }}
                    {% endif %}
                </span>
            </div>
            <div class="date-item">
                <span class="date-item-label">Days</span>
                <span class="date-item-value" style="{% if probation.days_remaining <= 7 %}color: #dc2626;{% elif probation.days_remaining <= 30 %}color: #d97706;{% endif %}">
                    {% if probation.worker.status == 'probation' or probation.worker.status == 'extended' %}
                        {% if probation.days_remaining < 0 %}
                            Overdue
                        {% else %}
                            {{ probation.days_remaining }}
                        {% endif %}
                    {% else %}
                        -
                    {% endif %}
                </span>
            </div>
        </div>
        
        <div class="card-actions">
            <a href="{% url 'zone:probation_detail' probation.id %}" class="btn-mini btn-view">
                <i class="bi bi-eye"></i> View
            </a>
            
            {% if probation.worker.status == 'probation' or probation.worker.status == 'extended' %}
                {% if request.user.is_staff or request.user.is_superuser %}
                    {% if probation.can_be_extended %}
                    <a href="{% url 'zone:probation_extend' probation.id %}" class="btn-mini btn-view" title="Extend">
                        <i class="bi bi-clock"></i> Extend
                    </a>
                    {% endif %}
                {% endif %}
            {% endif %}
        </div>
    </div>
</div>