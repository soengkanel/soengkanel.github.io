{% extends 'base/base.html' %}
{% load static %}

{% block title %}{% block page_title %}Zone Management{% endblock %} - {{ system_title }}{% endblock %}

{% block extra_css %}
<!-- Zone-specific CSS for compact UI and enhanced styling -->
<style>
    /* Zone-specific compact enhancements */
    .zone-content {
        padding: 0.75rem !important; /* More compact content padding */
    }
    
    .zone-card {
        border-radius: 6px !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
        border: 1px solid #e3e6f0 !important;
        margin-bottom: 1rem !important;
    }
    
    .zone-card-header {
        background: linear-gradient(45deg, #4e73df, #5a6acf) !important;
        color: white !important;
        padding: 0.5rem 0.75rem !important; /* Compact header padding */
        border-radius: 5px 5px 0 0 !important;
        font-size: 0.875rem !important; /* Smaller header text */
        font-weight: 600 !important;
    }
    
    .zone-card-body {
        padding: 0.75rem !important; /* Compact body padding */
    }
    
    /* Compact form styling for zone pages */
    .zone-form .form-label {
        font-size: 0.8125rem !important; /* Smaller labels */
        font-weight: 600 !important;
        margin-bottom: 0.25rem !important;
        color: #5a5c69 !important;
    }
    
    .zone-form .form-control,
    .zone-form .form-select {
        font-size: 0.8125rem !important; /* Smaller form inputs */
        padding: 0.375rem 0.5rem !important; /* Compact input padding */
        border-radius: 4px !important;
        border: 1px solid #d1d3e2 !important;
    }
    
    .zone-form .form-control:focus,
    .zone-form .form-select:focus {
        border-color: #4e73df !important;
        box-shadow: 0 0 0 0.15rem rgba(78, 115, 223, 0.25) !important;
    }
    
    /* Compact button styling */
    .zone-btn {
        font-size: 0.8125rem !important; /* Smaller button text */
        padding: 0.375rem 0.75rem !important; /* Compact button padding */
        border-radius: 4px !important;
        font-weight: 500 !important;
    }
    
    .zone-btn-sm {
        font-size: 0.75rem !important; /* Extra small buttons */
        padding: 0.25rem 0.5rem !important;
    }
    
    /* Compact table styling for zone data */
    .zone-table {
        font-size: 0.8125rem !important; /* Smaller table text */
    }
    
    .zone-table th {
        padding: 0.5rem 0.75rem !important; /* Compact header padding */
        background-color: #f8f9fc !important;
        border-bottom: 1px solid #e3e6f0 !important;
        font-weight: 600 !important;
        color: #5a5c69 !important;
        font-size: 0.75rem !important; /* Smaller header text */
        text-transform: uppercase !important;
        letter-spacing: 0.5px !important;
    }
    
    .zone-table td {
        padding: 0.5rem 0.75rem !important; /* Compact cell padding */
        border-top: 1px solid #e3e6f0 !important;
        vertical-align: middle !important;
    }
    
    /* Status badges for compact display */
    .zone-badge {
        font-size: 0.6875rem !important; /* Smaller badges */
        padding: 0.25em 0.5em !important;
        border-radius: 3px !important;
        font-weight: 500 !important;
    }
    
    /* Compact pagination */
    .zone-pagination .page-link {
        font-size: 0.8125rem !important;
        padding: 0.375rem 0.5rem !important; /* Compact pagination padding */
    }
    
    /* Compact alert styling */
    .zone-alert {
        font-size: 0.8125rem !important;
        padding: 0.5rem 0.75rem !important; /* Compact alert padding */
        border-radius: 4px !important;
        margin-bottom: 0.75rem !important;
    }
    
    /* Probation-specific styling */
    .probation-status {
        display: inline-flex !important;
        align-items: center !important;
        gap: 0.25rem !important;
        font-size: 0.75rem !important;
        font-weight: 500 !important;
    }
    
    .probation-active {
        color: #e74a3b !important;
    }
    
    .probation-completed {
        color: #1cc88a !important;
    }
    
    .probation-extended {
        color: #f6c23e !important;
    }
    
    /* Worker information cards */
    .worker-info-card {
        background: #f8f9fc !important;
        border: 1px solid #e3e6f0 !important;
        border-radius: 6px !important;
        padding: 0.75rem !important;
        margin-bottom: 0.75rem !important;
    }
    
    .worker-info-card h6 {
        color: #5a5c69 !important;
        font-size: 0.8125rem !important;
        font-weight: 600 !important;
        margin-bottom: 0.5rem !important;
    }
    
    .worker-info-card p {
        margin-bottom: 0.25rem !important;
        font-size: 0.8125rem !important;
        color: #6c757d !important;
    }
    
    .worker-info-card strong {
        color: #5a5c69 !important;
    }
    
    /* Responsive adjustments for mobile */
    @media (max-width: 768px) {
        .zone-content {
            padding: 0.5rem !important;
        }
        
        .zone-card-body {
            padding: 0.5rem !important;
        }
        
        .zone-form .form-control,
        .zone-form .form-select {
            font-size: 0.875rem !important; /* Slightly larger on mobile */
        }
        
        .zone-table {
            font-size: 0.75rem !important; /* Even smaller on mobile */
        }
        
        .zone-table th,
        .zone-table td {
            padding: 0.375rem !important;
        }
    }
    
    /* Icon sizing for compact UI */
    .zone-icon {
        font-size: 0.875rem !important;
        width: 1rem !important;
        text-align: center !important;
    }
    
    .zone-icon-lg {
        font-size: 1rem !important;
        width: 1.25rem !important;
        text-align: center !important;
    }
    
    /* Page header styling */
    .zone-page-header {
        margin-bottom: 1rem !important;
        padding-bottom: 0.5rem !important;
        border-bottom: 1px solid #e3e6f0 !important;
    }
    
    .zone-page-header h1 {
        font-size: 1.5rem !important; /* Compact page title */
        font-weight: 600 !important;
        color: #5a5c69 !important;
        margin-bottom: 0.25rem !important;
    }
    
    .zone-page-header p {
        font-size: 0.8125rem !important;
        color: #6c757d !important;
        margin-bottom: 0 !important;
    }
    

</style>
{% endblock %}

{% block content %}
<div class="zone-content">

    
    <!-- Zone page header -->
    {% comment %} {% block zone_page_header %}
    <div class="zone-page-header">
        <div class="d-flex justify-content-between align-items-start">
            <div>
                <h1>{% block zone_title %}Zones{% endblock %}</h1>
                {% block zone_description %}
                <p>Manage workers, probations, and related zone operations</p>
                {% endblock %}
            </div>
            <div>
                {% block zone_actions %}{% endblock %}
            </div>
        </div>
    </div>
    {% endblock %} {% endcomment %}
    
    <!-- Zone-specific content area -->
    {% block zone_content %}{% endblock %}
</div>
{% endblock %}

{% block extra_js %}
<!-- Zone-specific JavaScript for enhanced UX -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Enhanced form validation feedback
    const forms = document.querySelectorAll('.zone-form');
    forms.forEach(form => {
        form.addEventListener('submit', function(e) {
            if (!form.checkValidity()) {
                e.preventDefault();
                e.stopPropagation();
                
                // Focus on first invalid field
                const firstInvalid = form.querySelector(':invalid');
                if (firstInvalid) {
                    firstInvalid.focus();
                    firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
            form.classList.add('was-validated');
        });
    });
    
    // Auto-dismiss success alerts
    const successAlerts = document.querySelectorAll('.alert-success');
    successAlerts.forEach(alert => {
        setTimeout(() => {
            const bsAlert = new bootstrap.Alert(alert);
            bsAlert.close();
        }, 5000);
    });
    
    // Enhance table row interactions
    const zoneTableRows = document.querySelectorAll('.zone-table tbody tr[data-href]');
    zoneTableRows.forEach(row => {
        row.style.cursor = 'pointer';
        row.addEventListener('click', function(e) {
            // Don't navigate if clicking on a button, link, or input
            if (!e.target.closest('a, button, input, select, .dropdown')) {
                window.location.href = this.dataset.href;
            }
        });
        
        // Add hover effect
        row.addEventListener('mouseenter', function() {
            this.style.backgroundColor = '#f8f9fc';
        });
        
        row.addEventListener('mouseleave', function() {
            this.style.backgroundColor = '';
        });
    });
    
    // Initialize tooltips for compact UI elements
    const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
    const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));
    
    // Enhanced search/filter functionality
    const searchInputs = document.querySelectorAll('.zone-search');
    searchInputs.forEach(input => {
        let timeout;
        input.addEventListener('input', function() {
            clearTimeout(timeout);
            timeout = setTimeout(() => {
                // Trigger search after 300ms of no typing
                if (this.form) {
                    this.form.submit();
                }
            }, 300);
        });
    });
});
</script>
{% endblock %} 