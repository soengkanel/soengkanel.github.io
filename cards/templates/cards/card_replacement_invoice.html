

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Invoice</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
    :root {
        --primary: #2563eb;
        --primary-dark: #1e40af;
        --bg-light: #f9fafb;
        --text-dark: #111827;
        --text-light: #6b7280;
        --border-color: #e5e7eb;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Poppins', sans-serif;
        background: var(--bg-light);
        padding: 20px;
        color: var(--text-dark);
    }

    .invoice-wrapper {
        max-width: 900px;
        margin: auto;
        background: white;
        border-radius: 12px;
        padding: 30px 40px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    }

    /* Header */
    .invoice-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        border-bottom: 2px solid var(--border-color);
        padding-bottom: 20px;
        margin-bottom: 30px;
    }
    .company-info h1 {
        font-size: 24px;
        font-weight: 600;
        color: var(--primary);
    }
    .company-info p {
        font-size: 14px;
        color: var(--text-light);
    }

    /* Actions */
    .actions {
        display: flex;
        gap: 10px;
    }
    .btn {
        padding: 8px 14px;
        border: none;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
    }
    .btn-primary {
        background: var(--primary);
        color: white;
    }
    .btn-primary:hover {
        background: var(--primary-dark);
    }
    .btn-secondary {
        background: #e5e7eb;
        color: var(--text-dark);
    }
    .btn-secondary:hover {
        background: #d1d5db;
    }

    /* Invoice meta */
    .invoice-meta {
        margin-bottom: 30px;
    }
    .invoice-meta h2 {
        font-size: 20px;
        margin-bottom: 8px;
    }
    .invoice-meta p {
        font-size: 14px;
        color: var(--text-light);
    }

    /* Table */
    table {
        width: 100%;
        border-collapse: collapse;
    }table {
      width: 100%;
      border-collapse: collapse;
    }
    table th, table td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: left;
    }
    table th {
      background: #f0f0f0;
    }

    /* Footer */
    .invoice-footer {
        text-align: center;
        font-size: 12px;
        color: var(--text-light);
        margin-top: 30px;
    }

    /* Line item styles */
    .item-description {
        font-weight: 500;
        color: var(--text-primary);
        line-height: 1.4;
    }

    .item-service {
        font-size: 11px;
        color: var(--text-muted);
        margin-top: 2px;
    }

    .item-notes {
        font-size: 11px;
        color: var(--text-secondary);
        font-style: italic;
        margin-top: 4px;
    }

    .text-right {
        text-align: right;
    }

    .text-nowrap {
        white-space: nowrap;
    }

    .header{
      display:flex;
      flex-direction: row;
      width:100%;
      justify-content: space-between;
      max-width: 900px;
      margin: auto;
      background: white;
      border-radius: 12px;
      padding: 10px 20px;
      margin-bottom:10px;
    }
    .back-link{
      text-decoration: none;
    }

    /* Print styles */
    @media print {
        body {
            background: white;
        }
        .header{
          display: none;
        }
        .actions {
            display: none;
        }
        .invoice-wrapper {
            box-shadow: none;
            margin: 0;
            padding: 0;
        }
    }
</style>
</head>
<body>
  <div class="header">
    <a href="{% url 'cards:card_replacement_list' %}" class="btn btn-primary back-link">Back to List</a>
    <div class="actions">
      <button class="btn btn-primary" onclick="window.print()">Print</button>
  </div>
  </div>
<div class="invoice-wrapper">

    <!-- Header -->
    <div class="invoice-header">
        <div class="company-info">
            <h1>KK Company</h1>
            <p>123 Business Street, City</p>
            <p>Email: info@kkcompany.com</p>
        </div>
        
    </div>

    <!-- Invoice Info -->
    <div class="invoice-meta">
        <h2>Invoice # {{invoice.invoice_number}}</h2>
        <p>Date: {{invoice.issue_date|date:"d/m/Y"}}</p>
        <p>Due: {{invoice.due_date|date:"d/m/Y"}}</p>
        <p>Billed To: {{invoice.get_client_name}}</p>
    </div>

    <!-- Table -->
    <table>
        <thead>
            <tr>
                <th>Description</th>
                <th>Qty</th>
                <th>Unit Price</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
          {%if line_items %}
            {% for item in line_items%}
            <tr>
              <td>
                  <div class="item-description">{{ item.description }}</div>
                  {% if item.service %}
                  <div class="item-service">
                      <i class="bi bi-tag" style="font-size: 10px;"></i>
                      {{ item.service.name }}
                  </div>
                  {% endif %}
                  {% if item.notes %}
                  <div class="item-notes">{{ item.notes }}</div>
                  {% endif %}
              </td>
                <td>{{ item.quantity|floatformat:"-2" }}</td>
                <td>${{ item.unit_price|floatformat:2 }}</td>
                <td><strong>${{ item.total_amount|floatformat:2 }}</strong></td>
            </tr>
            {% endfor %}
            {%else%}
              <tr>
                <td colspan="3">No Item</td>
              </tr>
            {% endif %}
            
        </tbody>
        <tfoot>
            <tr>
                <th colspan="3" class="text-right">SubTotal</th>
                <td>${{ invoice.subtotal|floatformat:2 }}</td>
            </tr>
            <tr>
              <th colspan="3" class="text-right">Tax</th>
              <td>${{ invoice.tax_amount|floatformat:2 }}</td>
          </tr>
          <tr>
            <th colspan="3" class="text-right">Grand Total</th>
            <td>${{ invoice.total_amount|floatformat:2 }}</td>
        </tr>
        </tfoot>
    </table>

    <!-- Footer -->
   
</div>

</body>
</html>
