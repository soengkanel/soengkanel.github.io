{% extends 'base.html' %}
{% load static %}

{% block title %}API Documentation{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-code"></i> NextHR API Documentation
                    </h3>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <h5><i class="fas fa-info-circle"></i> API Overview</h5>
                        <p>Welcome to the NextHR Project Management API. This RESTful API provides comprehensive endpoints for managing projects, tasks, teams, timesheets, and more.</p>
                    </div>

                    <div class="row mt-4">
                        <div class="col-md-6">
                            <div class="card border-primary">
                                <div class="card-header bg-primary text-white">
                                    <h5><i class="fas fa-book"></i> Interactive Documentation</h5>
                                </div>
                                <div class="card-body">
                                    <p>Explore and test our API endpoints using interactive documentation:</p>
                                    <div class="list-group">
                                        <a href="/api/v1/docs/" class="list-group-item list-group-item-action" target="_blank">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1"><i class="fab fa-swagger text-success"></i> Swagger UI</h6>
                                                <small class="text-muted">Interactive</small>
                                            </div>
                                            <p class="mb-1">Interactive API documentation with a modern UI. Test endpoints directly from your browser.</p>
                                        </a>
                                        <a href="/api/v1/redoc/" class="list-group-item list-group-item-action" target="_blank">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1"><i class="fas fa-file-alt text-danger"></i> ReDoc</h6>
                                                <small class="text-muted">Reference</small>
                                            </div>
                                            <p class="mb-1">Clean, responsive documentation for API reference. Best for reading and understanding endpoints.</p>
                                        </a>
                                        <a href="/api/v1/schema/" class="list-group-item list-group-item-action" target="_blank">
                                            <div class="d-flex w-100 justify-content-between">
                                                <h6 class="mb-1"><i class="fas fa-code text-info"></i> OpenAPI Schema</h6>
                                                <small class="text-muted">Raw Schema</small>
                                            </div>
                                            <p class="mb-1">Download the raw OpenAPI 3.0 schema for use with API clients and code generation.</p>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="card border-info">
                                <div class="card-header bg-info text-white">
                                    <h5><i class="fas fa-rocket"></i> Quick Start</h5>
                                </div>
                                <div class="card-body">
                                    <h6>Authentication</h6>
                                    <p>All API endpoints require authentication. Use session authentication or basic authentication.</p>

                                    <h6>Base URL</h6>
                                    <code class="d-block p-2 bg-light">{{ request.scheme }}://{{ request.get_host }}/api/v1/</code>

                                    <h6 class="mt-3">Example Request</h6>
                                    <pre class="bg-dark text-white p-2"><code>GET /api/v1/projects/
Authorization: Basic base64(username:password)</code></pre>

                                    <h6 class="mt-3">Response Format</h6>
                                    <p>All responses are in JSON format with pagination for list endpoints.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card mt-4 border-success">
                        <div class="card-header bg-success text-white">
                            <h5><i class="fas fa-sitemap"></i> Available Endpoints</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <h6><i class="fas fa-project-diagram"></i> Projects</h6>
                                    <ul class="list-unstyled">
                                        <li><code>GET /api/v1/endpoints/projects/</code> - List projects</li>
                                        <li><code>POST /api/v1/endpoints/projects/</code> - Create project</li>
                                        <li><code>GET /api/v1/endpoints/projects/{id}/</code> - Get project</li>
                                        <li><code>PUT /api/v1/endpoints/projects/{id}/</code> - Update project</li>
                                        <li><code>DELETE /api/v1/endpoints/projects/{id}/</code> - Delete project</li>
                                        <li><code>GET /api/v1/endpoints/projects/stats/</code> - Project statistics</li>
                                        <li><code>GET /api/v1/endpoints/projects/{id}/timeline/</code> - Project timeline</li>
                                        <li><code>GET /api/v1/endpoints/projects/{id}/expenses/</code> - Project expenses</li>
                                    </ul>
                                </div>
                                <div class="col-md-4">
                                    <h6><i class="fas fa-tasks"></i> Tasks & Milestones</h6>
                                    <ul class="list-unstyled">
                                        <li><code>GET /api/v1/endpoints/project-tasks/</code> - List tasks</li>
                                        <li><code>POST /api/v1/endpoints/project-tasks/</code> - Create task</li>
                                        <li><code>POST /api/v1/endpoints/project-tasks/{id}/update_progress/</code> - Update progress</li>
                                        <li><code>GET /api/v1/endpoints/project-milestones/</code> - List milestones</li>
                                        <li><code>POST /api/v1/endpoints/project-milestones/{id}/complete/</code> - Complete milestone</li>
                                    </ul>
                                </div>
                                <div class="col-md-4">
                                    <h6><i class="fas fa-users"></i> Teams & Timesheets</h6>
                                    <ul class="list-unstyled">
                                        <li><code>GET /api/v1/endpoints/teams/</code> - List teams</li>
                                        <li><code>POST /api/v1/endpoints/teams/</code> - Create team</li>
                                        <li><code>GET /api/v1/endpoints/teams/{id}/members/</code> - Team members</li>
                                        <li><code>GET /api/v1/endpoints/timesheets/</code> - List timesheets</li>
                                        <li><code>POST /api/v1/endpoints/timesheets/{id}/submit/</code> - Submit timesheet</li>
                                        <li><code>POST /api/v1/endpoints/timesheets/{id}/approve/</code> - Approve timesheet</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-warning mt-4">
                        <h6><i class="fas fa-lock"></i> Security Notice</h6>
                        <p class="mb-0">All API endpoints require authentication. Ensure you're logged in before accessing the API documentation. API access follows the same permission rules as the web interface.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    // Add animation to cards on hover
    $('.card').hover(
        function() { $(this).addClass('shadow-lg'); },
        function() { $(this).removeClass('shadow-lg'); }
    );
});
</script>
{% endblock %}